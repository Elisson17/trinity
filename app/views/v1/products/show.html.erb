<div class="container mx-auto px-4 py-8">
  <nav class="mb-8">
    <ol class="flex items-center space-x-2 text-sm text-gray-500">
      <li><%= link_to "Início", v1_root_path, class: "hover:text-gray-700" %></li>
      <li>/</li>
      <li><%= link_to "Produtos", v1_products_path, class: "hover:text-gray-700" %></li>
      <li>/</li>
      <li class="text-gray-900"><%= @product.name %></li>
    </ol>
  </nav>

  <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
    <div>
      <div class="aspect-square bg-gray-100 rounded-lg overflow-hidden mb-4">
        <% if @product.has_images? %>
          <%= image_tag @product.main_image, 
              class: "w-full h-full object-cover",
              alt: @product.name %>
        <% else %>
          <div class="w-full h-full flex items-center justify-center">
            <svg class="w-32 h-32 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd" />
            </svg>
          </div>
        <% end %>
      </div>
      
      <div class="grid grid-cols-4 gap-2">
        <% if @product.has_images? %>
          <% @product.images.each_with_index do |image, index| %>
            <div class="aspect-square bg-gray-100 rounded border-2 border-transparent hover:border-gray-300 cursor-pointer overflow-hidden">
              <%= image_tag image, class: "w-full h-full object-cover", alt: "#{@product.name} - Imagem #{index + 1}" %>
            </div>
          <% end %>
        <% else %>
          <% 4.times do %>
            <div class="aspect-square bg-gray-100 rounded border-2 border-transparent hover:border-gray-300 cursor-pointer">
            </div>
          <% end %>
        <% end %>
      </div>
    </div>

    <div>
      <h1 class="text-3xl font-bold text-gray-900 mb-4"><%= @product.name %></h1>
      
      <div class="mb-6">
        <span class="text-3xl font-bold text-green-600"><%= @product.formatted_price %></span>
        <% if @product.featured? %>
          <span class="ml-3 px-3 py-1 bg-yellow-100 text-yellow-800 text-sm rounded-full">
            ⭐ Produto em Destaque
          </span>
        <% end %>
      </div>

      <div class="mb-6">
        <h3 class="font-semibold text-gray-900 mb-2">Descrição</h3>
        <p class="text-gray-600 leading-relaxed"><%= @product.description %></p>
      </div>

      <div class="mb-8 space-y-4">
        <div>
          <span class="font-semibold text-gray-900">SKU:</span>
          <span class="text-gray-600 ml-2"><%= @product.sku %></span>
        </div>
        
        <% if @product.material.present? %>
          <div>
            <span class="font-semibold text-gray-900">Material:</span>
            <span class="text-gray-600 ml-2"><%= @product.material %></span>
          </div>
        <% end %>
        
        <% if @product.care_instructions.present? %>
          <div>
            <span class="font-semibold text-gray-900">Cuidados:</span>
            <p class="text-gray-600 mt-1"><%= @product.care_instructions %></p>
          </div>
        <% end %>
      </div>

      <div class="space-y-4" data-controller="cart">
        <button data-action="click->cart#addToCart"
                data-product-id="<%= @product.id %>"
                data-quantity="1"
                class="w-full px-6 py-3 bg-gray-900 text-white font-semibold rounded-lg hover:bg-gray-800 transition-colors">
          Adicionar ao Carrinho
        </button>
        
        <button class="w-full px-6 py-3 border border-gray-300 text-gray-700 font-semibold rounded-lg hover:bg-gray-50 transition-colors">
          ❤️ Adicionar aos Favoritos
        </button>
      </div>

      <div class="mt-8 p-4 bg-gray-50 rounded-lg">
        <h4 class="font-semibold text-gray-900 mb-2">Informações de Entrega</h4>
        <ul class="text-sm text-gray-600 space-y-1">
          <li>✓ Frete grátis para compras acima de R$ 99</li>
          <li>✓ Entrega em 3-5 dias úteis</li>
          <li>✓ Troca grátis em até 30 dias</li>
        </ul>
      </div>
    </div>
  </div>

  <% if @related_products.any? %>
    <div class="mt-16">
      <h2 class="text-2xl font-bold text-gray-900 mb-8">Produtos Relacionados</h2>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        <% @related_products.each do |product| %>
          <div class="bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow">
            <div class="aspect-square bg-gray-100 rounded-t-lg overflow-hidden">
              <% if product.has_images? %>
                <%= image_tag product.main_image, 
                    class: "w-full h-full object-cover",
                    alt: product.name %>
              <% else %>
                <div class="w-full h-full flex items-center justify-center">
                  <svg class="w-16 h-16 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd" />
                  </svg>
                </div>
              <% end %>
            </div>
            
            <div class="p-4">
              <h3 class="font-semibold text-gray-900 mb-2">
                <%= link_to product.name, v1_product_path(product), class: "hover:text-blue-600 transition-colors" %>
              </h3>
              <span class="text-lg font-bold text-green-600"><%= product.formatted_price %></span>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>
</div>
