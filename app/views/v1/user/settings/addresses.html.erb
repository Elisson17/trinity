<div class="p-6">
  <div class="flex items-center justify-between mb-6">
    <h1 class="text-2xl font-bold text-gray-900">Meus Endereços</h1>
    <%= render "components/modal", trigger_text: "Adicionar endereço", title: "Adicionar novo endereço" do %>
      <%= render "v1/user/settings/forms/address_form", address: Address.new %>
    <% end %>
  </div>

  <% if @addresses.empty? %>
    <div class="text-center py-12">
      <svg class="mx-auto h-12 w-12 text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
      </svg>
      <h3 class="text-lg font-medium text-gray-900 mb-2">Nenhum endereço cadastrado</h3>
      <p class="text-gray-500 mb-6">Adicione um endereço para facilitar suas compras futuras.</p>
    </div>
  <% else %>
    <% @addresses.each do |address| %>
      <div class="space-y-4">
        <div class="bg-white border border-gray-200 rounded-lg p-6">
          <div class="flex items-start justify-between">
            <div class="flex-1">
              <div class="flex items-center mb-2">
                <h3 class="font-medium text-gray-900 mr-3"><%= address.nickname %></h3>
                  <% if address.is_default? %>
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                      Principal
                    </span>
                  <% end %>
              </div>
              <div class="text-sm text-gray-600 space-y-1">
                <p><%= address.street %></p>
                <p><%= address.neighborhood %></p>
                <p><%= address.city %> - <%= address.state %>, <%= address.cep %></p>
              </div>
            </div>
            <div class="flex items-center space-x-2 ml-4 gap-2">
              <%= render "components/modal", trigger_text: "Editar", title: "Editar endereço" do %>
                <%= render "v1/user/settings/forms/address_form", address: address %>
              <% end %>
          <%= render RubyUI::AlertDialog.new do %>
            <%= render RubyUI::AlertDialogTrigger.new do %>
              <%= render RubyUI::Button.new(variant: :outline, class: "text-red-600 hover:text-red-500 text-sm font-medium") do %>
                Excluir
              <% end %>
            <% end %>

            <%= render RubyUI::AlertDialogContent.new do %>
              <%= render RubyUI::AlertDialogHeader.new do %>
                <%= render RubyUI::AlertDialogTitle.new do %>
                  Excluir endereço
                <% end %>
                <%= render RubyUI::AlertDialogDescription.new do %>
                  Tem certeza que deseja excluir o endereço "<%= address.nickname %>"? Esta ação não pode ser desfeita.
                <% end %>
              <% end %>

              <div class="flex justify-end gap-2 mt-4">
                <%= render RubyUI::Button.new(variant: :outline, data: { action: "click->ruby-ui--dialog#dismiss" }) do %>
                  Cancelar
                <% end %>

                <%= button_to "Confirmar", v1_user_destroy_address_path(address), method: :delete, class: "px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700" %>
              </div>
            <% end %>
          <% end %>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  <% end %>
</div>
